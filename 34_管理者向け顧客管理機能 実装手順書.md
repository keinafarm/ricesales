ã“ã®æ‰‹é †æ›¸ã§ã¯ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã§æ–°è¨­ã•ã‚ŒãŸ`mg_customers`ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã€ç®¡ç†è€…å‘ã‘ã®é¡§å®¢ç®¡ç†æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

---

### **ã€ä½œæ¥­å‰ç¢ºèªã€‘å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§**

ä»Šå›ã®ã‚¿ã‚¹ã‚¯ã€Œç®¡ç†è€…å‘ã‘é¡§å®¢ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…ã€ã§ã¯ã€ä»¥ä¸‹ã®è–å…¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ãƒ»ä½œæˆã—ã¾ã™ã€‚ãŠæ‰‹å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã«ã“ã‚Œã‚‰ãŒå…¨ã¦å«ã¾ã‚Œã¦ã„ã‚‹ã‹ã€ã”ç¢ºèªãã ã•ã„ã€‚

* **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (æ–°è¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³):**
  * `mg_customers/api.py`
  * `mg_customers/views.py`
  * `mg_customers/urls.py`
* **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (æ–°è¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³):**
  * `mg_customers/templates/mg_customers/customer_list.html`
  * `mg_customers/templates/mg_customers/customer_create.html`
  * `mg_customers/templates/mg_customers/customer_detail.html`
* **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã¸ã®çµ„è¾¼:**
  * `dashboard/urls.py` ï¼ˆå¤‰æ›´ï¼‰
* **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç¶™æ‰¿å…ƒ:**
  * `templates/base_management.html`
* **å‚ç…§ã™ã‚‹ãƒ¢ãƒ‡ãƒ«:**
  * `accounts/models.py`

ä¸Šè¨˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒæƒã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã„ãŸã—ã¾ã—ãŸã®ã§ã€å®Ÿè£…æ‰‹é †æ›¸ã‚’ä½œæˆã—ã¾ã™ã€‚

---

### **ã€æ©Ÿèƒ½å˜ä½ã€‘ç®¡ç†è€…å‘ã‘é¡§å®¢ç®¡ç†æ©Ÿèƒ½ å®Ÿè£…æ‰‹é †æ›¸ (Ver. 3.0)**

#### 1. ç›®çš„

ç¾åœ¨Djangoç®¡ç†ã‚µã‚¤ãƒˆã§è¡Œã‚ã‚Œã¦ã„ã‚‹é¡§å®¢ãŠã‚ˆã³ãŠå±Šã‘å…ˆã®ç®¡ç†ã‚’ã€ã‚·ã‚¹ãƒ†ãƒ ã®ç®¡ç†è€…å‘ã‘ç”»é¢å†…ã«çµ±åˆã—ã¾ã™ã€‚ã“ã®æ‰‹é †æ›¸ã§ã¯ã€æ–°è¨­ã•ã‚ŒãŸ`mg_customers`ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

* **é¡§å®¢ä¸€è¦§ç”»é¢:** å…¨é¡§å®¢ã‚’æ¤œç´¢ãƒ»ã‚½ãƒ¼ãƒˆå¯èƒ½ãªä¸€è¦§ã§è¡¨ç¤ºã—ã€æ–°è¦é¡§å®¢ã‚’è¿½åŠ ã™ã‚‹ãƒœã‚¿ãƒ³ã‚’è¨­ç½®ã—ã¾ã™ã€‚
* **é¡§å®¢æ–°è¦ä½œæˆç”»é¢:** æ–°ã—ã„é¡§å®¢ã®ãƒ­ã‚°ã‚¤ãƒ³IDã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç™»éŒ²ã§ãã¾ã™ã€‚
* **é¡§å®¢è©³ç´°ç”»é¢:**
  * é¡§å®¢ã®åŸºæœ¬æƒ…å ±ï¼ˆãƒ­ã‚°ã‚¤ãƒ³IDã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰ã‚’ç”»é¢é·ç§»ãªãç·¨é›†ã§ãã¾ã™ã€‚
  * ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å†è¨­å®šãŒå¯èƒ½ã§ã™ã€‚
  * é¡§å®¢ã«ç´ã¥ããŠå±Šã‘å…ˆæƒ…å ±ã‚’éåŒæœŸã§è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ï¼ˆCRUDï¼‰ã§ãã¾ã™ã€‚
  * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›æ¬„ã«ã¯ã€è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã€Œç›®ç‰ã‚¢ã‚¤ã‚³ãƒ³ã€ã‚’è¨­ç½®ã—ã¾ã™ã€‚

#### 2. æ‰‹é †1ï¼šãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å®Ÿè£… (`mg_customers`ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³)

é¡§å®¢ç®¡ç†æ©Ÿèƒ½ã®ãƒ­ã‚¸ãƒƒã‚¯ã€APIã€URLå®šç¾©ã‚’`mg_customers`ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦æ–°è¦ã«ä½œæˆã—ã¾ã™ã€‚

##### **ãƒ•ã‚¡ã‚¤ãƒ«:** `mg_customers/api.py` **(æ–°è¦ä½œæˆ)**

```python
# mg_customers/api.py
from django.http import JsonResponse, HttpRequest
from django.views import View
from django.shortcuts import get_object_or_404
from django.utils.decorators import method_decorator
from django.views.decorators.csrf import csrf_protect
from django.contrib.admin.views.decorators import staff_member_required
import json

from accounts.models import User, Destination

def _json(request: HttpRequest):
    try:
        body = request.body.decode("utf-8") or "{}"
        return json.loads(body)
    except json.JSONDecodeError:
        return {}

def _bad_request(message: str, *, code: str = "invalid_request", errors=None):
    payload = {"ok": False, "error": {"code": code, "message": message}}
    if errors:
        payload["error"]["errors"] = errors
    return JsonResponse(payload, status=400)

def _ok(data=None, *, status: int = 200):
    payload = {"ok": True}
    if data:
        payload.update(data)
    return JsonResponse(payload, status=status)

@method_decorator(staff_member_required(login_url='/accounts/login/'), name="dispatch")
class DestinationListView(View):
    def get(self, request: HttpRequest, user_id: int):
        user = get_object_or_404(User, id=user_id)
        destinations = Destination.objects.filter(user=user).order_by('id')
        data = [
            {
                "id": dest.id,
                "name": dest.name,
                "postal_code": dest.postal_code,
                "address": dest.address,
                "phone": dest.phone,
                "delivery_method": dest.delivery_method,
                "delivery_method_display": dest.get_delivery_method_display(),
                "shipping_zone": dest.shipping_zone,
                "shipping_zone_display": dest.get_shipping_zone_display(),
            }
            for dest in destinations
        ]
        return _ok({"destinations": data})

@method_decorator(csrf_protect, name="dispatch")
@method_decorator(staff_member_required(login_url='/accounts/login/'), name="dispatch")
class DestinationUpsertView(View):
    def post(self, request: HttpRequest):
        data = _json(request)
        dest_id = data.get("id")
        user_id = data.get("user_id")
        if not user_id:
            return _bad_request("ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¯å¿…é ˆã§ã™ã€‚")
        user = get_object_or_404(User, id=user_id)
        required_fields = ["name", "postal_code", "address", "phone"]
        if not all(data.get(f) for f in required_fields):
            return _bad_request("å®›åã€éƒµä¾¿ç•ªå·ã€ä½æ‰€ã€é›»è©±ç•ªå·ã¯å¿…é ˆã§ã™ã€‚")
        if dest_id:
            destination = get_object_or_404(Destination, id=dest_id, user=user)
        else:
            destination = Destination(user=user)
        destination.name = data.get("name", "")
        destination.postal_code = data.get("postal_code", "")
        destination.address = data.get("address", "")
        destination.phone = data.get("phone", "")
        destination.delivery_method = data.get("delivery_method", "YAMATO")
        destination.shipping_zone = data.get("shipping_zone", "NORMAL")
        destination.save()
        return _ok({"message": "ãŠå±Šã‘å…ˆæƒ…å ±ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚"})

@method_decorator(csrf_protect, name="dispatch")
@method_decorator(staff_member_required(login_url='/accounts/login/'), name="dispatch")
class DestinationDeleteView(View):
    def post(self, request: HttpRequest, pk: int):
        destination = get_object_or_404(Destination, id=pk)
        if destination.order_set.exists():
            return _bad_request("ã“ã®ãŠå±Šã‘å…ˆã¯æ—¢å­˜ã®æ³¨æ–‡ã«ç´ä»˜ã„ã¦ã„ã‚‹ãŸã‚å‰Šé™¤ã§ãã¾ã›ã‚“ã€‚")
        destination.delete()
        return _ok({"message": "ãŠå±Šã‘å…ˆã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚"})

@method_decorator(csrf_protect, name="dispatch")
@method_decorator(staff_member_required(login_url='/accounts/login/'), name="dispatch")
class CustomerInfoUpdateView(View):
    def post(self, request: HttpRequest, user_id: int):
        user = get_object_or_404(User, id=user_id)
        data = _json(request)
        new_username = data.get("username", "").strip()
        new_email = data.get("email", "").strip()
        if not new_username:
            return _bad_request("é¡§å®¢åï¼ˆãƒ­ã‚°ã‚¤ãƒ³IDï¼‰ã¯å¿…é ˆã§ã™ã€‚")
        if User.objects.exclude(id=user_id).filter(username=new_username).exists():
            return _bad_request("ã“ã®ãƒ­ã‚°ã‚¤ãƒ³IDã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚")
        user.username = new_username
        user.email = new_email
        user.save(update_fields=['username', 'email'])
        return _ok({"message": "é¡§å®¢æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚"})

@method_decorator(csrf_protect, name="dispatch")
@method_decorator(staff_member_required(login_url='/accounts/login/'), name="dispatch")
class CustomerPasswordSetView(View):
    def post(self, request: HttpRequest, user_id: int):
        user = get_object_or_404(User, id=user_id)
        data = _json(request)
        password = data.get("password")
        if not password or len(password) < 8:
            return _bad_request("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚")
        user.set_password(password)
        user.save(update_fields=['password'])
        return _ok({"message": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚"})
```

##### **ãƒ•ã‚¡ã‚¤ãƒ«:** `mg_customers/views.py` **(æ–°è¦ä½œæˆ)**

```python
# mg_customers/views.py
from django.shortcuts import render, redirect, get_object_or_404
from django.contrib.auth.decorators import login_required, user_passes_test
from django.db.models import Sum, F, Count, Max, Q, Value, OuterRef, Subquery
from django.db.models.functions import Coalesce
from django.contrib import messages
import json

from accounts.models import Destination, User
from orders.models import Order, OrderItem

def is_staff_user(user):
    return user.is_staff

@login_required
@user_passes_test(is_staff_user, login_url='/accounts/login/')
def customer_list_view(request):
    query = request.GET.get('q', '')
    sort = request.GET.get('sort', '-last_order_date')
    
    # æ­£ã—ã„é€æ–™ï¼ˆç¢ºå®šé€æ–™ãŒã‚ã‚Œã°ãã‚Œã€ãªã‘ã‚Œã°å‚è€ƒé€æ–™ï¼‰ã‚’æ³¨æ–‡ã”ã¨ã«é›†è¨ˆã™ã‚‹ã‚µãƒ–ã‚¯ã‚¨ãƒª
    # ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸæ³¨æ–‡ã¯é™¤å¤–ã™ã‚‹
    shipping_total_subquery = Order.objects.filter(
        user=OuterRef('pk')
    ).exclude(
        status=Order.OrderStatus.CANCELED
    ).values('user').annotate(
        total_shipping=Sum(
            Coalesce('final_shipping_fee', 'provisional_shipping_fee')
        )
    ).values('total_shipping')

    # å•†å“é‡‘é¡ã®åˆè¨ˆã‚’è¨ˆç®— (ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸæ³¨æ–‡ã¯é™¤å¤–)
    items_total_annotation = Sum(
        F('order__items__price_at_order') * F('order__items__quantity'),
        filter=Q(order__isnull=False) & ~Q(order__status=Order.OrderStatus.CANCELED)
    )

    users = User.objects.filter(is_staff=False).annotate(
        last_order_date=Max('order__created_at'),
        # å•†å“åˆè¨ˆã¨é€æ–™åˆè¨ˆã‚’åˆ¥ã€…ã«è¨ˆç®—ã—ã€æœ€å¾Œã«åˆç®—ã™ã‚‹ã“ã¨ã§ã€
        # æ³¨æ–‡å•†å“æ•°ã«ã‚ˆã£ã¦é€æ–™ãŒè¤‡æ•°å›ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ä¸å…·åˆã‚’ä¿®æ­£
        total_items_amount=Coalesce(items_total_annotation, Value(0)),
        total_shipping_amount=Coalesce(Subquery(shipping_total_subquery), Value(0))
    ).annotate(
        total_order_amount=F('total_items_amount') + F('total_shipping_amount')
    )

    if query:
        users = users.filter(
            Q(username__icontains=query) |
            Q(destination__name__icontains=query) |
            Q(destination__address__icontains=query)
        ).distinct()
    if sort in ['username', '-username', 'last_order_date', '-last_order_date', 'total_order_amount', '-total_order_amount']:
        users = users.order_by(sort)
    context = {
        'users': users,
        'query': query,
        'sort': sort,
    }
    return render(request, 'mg_customers/customer_list.html', context)

@login_required
@user_passes_test(is_staff_user, login_url='/accounts/login/')
def customer_detail_view(request, user_id):
    user = get_object_or_404(User, id=user_id, is_staff=False)
    delivery_method_choices = Destination.DeliveryMethod.choices
    shipping_zone_choices = Destination.ShippingZone.choices
    context = {
        'customer': user,
        'delivery_method_choices_json': json.dumps(delivery_method_choices),
        'shipping_zone_choices_json': json.dumps(shipping_zone_choices),
    }
    return render(request, 'mg_customers/customer_detail.html', context)

@login_required
@user_passes_test(is_staff_user, login_url='/accounts/login/')
def customer_create_view(request):
    if request.method == 'POST':
        username = request.POST.get('username', '').strip()
        email = request.POST.get('email', '').strip()
        password = request.POST.get('password', '')
        errors = {}
        if not username:
            errors['username'] = 'é¡§å®¢åï¼ˆãƒ­ã‚°ã‚¤ãƒ³IDï¼‰ã¯å¿…é ˆã§ã™ã€‚'
        elif User.objects.filter(username=username).exists():
            errors['username'] = 'ã“ã®ãƒ­ã‚°ã‚¤ãƒ³IDã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚'
        if not password or len(password) < 8:
            errors['password'] = 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'
        if errors:
            context = {'errors': errors, 'form_data': request.POST}
            return render(request, 'mg_customers/customer_create.html', context)
        new_user = User.objects.create_user(
            username=username,
            email=email,
            password=password
        )
        messages.success(request, f'é¡§å®¢ã€Œ{new_user.username}ã€ã‚’ç™»éŒ²ã—ã¾ã—ãŸã€‚')
        return redirect('dashboard:mg_customers:customer_detail', user_id=new_user.id)
    return render(request, 'mg_customers/customer_create.html')
```

##### **ãƒ•ã‚¡ã‚¤ãƒ«:** `mg_customers/urls.py` **(æ–°è¦ä½œæˆ)**

```python
# mg_customers/urls.py
from django.urls import path
from . import views
from . import api

app_name = 'mg_customers'

urlpatterns = [
    path('', views.customer_list_view, name='customer_list'),
    path('create/', views.customer_create_view, name='customer_create'),
    path('<int:user_id>/', views.customer_detail_view, name='customer_detail'),
    
    # API
    path('api/<int:user_id>/destinations/', api.DestinationListView.as_view(), name='api_destinations_list'),
    path('api/destinations/upsert/', api.DestinationUpsertView.as_view(), name='api_destinations_upsert'),
    path('api/destinations/<int:pk>/delete/', api.DestinationDeleteView.as_view(), name='api_destinations_delete'),
    path('api/<int:user_id>/update-info/', api.CustomerInfoUpdateView.as_view(), name='api_info_update'),
    path('api/<int:user_id>/set-password/', api.CustomerPasswordSetView.as_view(), name='api_password_set'),
]
```

#### 3. æ‰‹é †2ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã¸ã®URLçµ„è¾¼ã¿

`dashboard`ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®URLå®šç¾©ã‚’ä¿®æ­£ã—ã€æ–°ã—ãä½œæˆã—ãŸ`mg_customers`ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¿½åŠ ã—ã¾ã™ã€‚

##### **ãƒ•ã‚¡ã‚¤ãƒ«:** `dashboard/urls.py` **(å…¨é¢çš„ã«ä¸Šæ›¸ã)**

```python
# dashboard/urls.py
from django.urls import path, include
from . import views

urlpatterns = [
    path('', views.dashboard_view, name='dashboard_top'),
    path('debug/', views.debug_view, name='debug_view'),
    path('import/', views.import_old_data_view, name='import'),
    path('manuals/', views.manual_management_view, name='manuals'),
    
    path('orders/', include('mg_orders.urls')),
    # â–¼â–¼â–¼ å¤‰æ›´ç‚¹: mg_customersã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®URLã‚’ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰ â–¼â–¼â–¼
    path('customers/', include('mg_customers.urls')),
    # â–²â–²â–² å¤‰æ›´ç‚¹ã“ã“ã¾ã§ â–²â–²â–²
    path('masters/', include('mg_masters.urls')),
    path('workflow/', include('mg_workflow.urls')),

    path('api/manuals/<str:page_name>/', views.manual_content_view, name='api_manual_content'),
    path('api/csrf/', views.csrf_seed, name='api_csrf_seed'),
]
```


#### 4. æ‰‹é †3ï¼šãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®å®Ÿè£… (`mg_customers`ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³)

ç®¡ç†è€…å‘ã‘é¡§å®¢ç®¡ç†æ©Ÿèƒ½ã®å„ç”»é¢ã«å¯¾å¿œã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’`mg_customers/templates/mg_customers/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ–°è¦ä½œæˆã—ã¾ã™ã€‚

##### **ãƒ•ã‚¡ã‚¤ãƒ«:** `mg_customers/templates/mg_customers/customer_list.html` **(æ–°è¦ä½œæˆ)**

```html
{% extends "base_management.html" %}
{% load humanize %}
{% block title %}é¡§å®¢ç®¡ç†{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="mb-0">é¡§å®¢ç®¡ç†</h1>
    <a href="{% url 'dashboard:mg_customers:customer_create' %}" class="btn btn-primary">
        <i class="bi bi-person-plus"></i> æ–°è¦é¡§å®¢ã‚’è¿½åŠ 
    </a>
</div>

<div class="card mb-3">
    <div class="card-body">
        <form method="get" action="">
            <div class="input-group">
                <input type="text" class="form-control" name="q" placeholder="é¡§å®¢åã€å®›åã€ä½æ‰€ã§æ¤œç´¢..." value="{{ query }}">
                <button class="btn btn-outline-secondary" type="submit"><i class="bi bi-search"></i> æ¤œç´¢</button>
            </div>
        </form>
    </div>
</div>

<div class="card">
    <div class="card-body p-0">
        <table class="table table-hover mb-0">
            <thead class="table-light">
                <tr>
                    {% with sort_username='username' sort_last_order='-last_order_date' sort_total='-total_order_amount' %}
                    <th>
                        <a href="?sort={% if sort == 'username' %}-username{% else %}username{% endif %}&q={{ query }}">
                            é¡§å®¢å
                            {% if sort == 'username' %}<i class="bi bi-sort-alpha-down"></i>{% elif sort == '-username' %}<i class="bi bi-sort-alpha-up"></i>{% endif %}
                        </a>
                    </th>
                    <th class="text-end">
                        <a href="?sort={% if sort == '-last_order_date' %}last_order_date{% else %}-last_order_date{% endif %}&q={{ query }}">
                            æœ€çµ‚æ³¨æ–‡æ—¥
                            {% if sort == '-last_order_date' %}<i class="bi bi-sort-down"></i>{% elif sort == 'last_order_date' %}<i class="bi bi-sort-up"></i>{% endif %}
                        </a>
                    </th>
                    <th class="text-end">
                        <a href="?sort={% if sort == '-total_order_amount' %}total_order_amount{% else %}-total_order_amount{% endif %}&q={{ query }}">
                            ç´¯è¨ˆæ³¨æ–‡é‡‘é¡
                            {% if sort == '-total_order_amount' %}<i class="bi bi-sort-numeric-down"></i>{% elif sort == 'total_order_amount' %}<i class="bi bi-sort-numeric-up"></i>{% endif %}
                        </a>
                    </th>
                    <th style="width: 10%;"></th>
                    {% endwith %}
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.username }}</td>
                    <td class="text-end">
                        {% if user.last_order_date %}
                            {{ user.last_order_date|date:"Y/m/d" }}
                        {% else %}
                            ãƒ¼
                        {% endif %}
                    </td>
                    <td class="text-end">{{ user.total_order_amount|intcomma }} å††</td>
                    <td class="text-center">
                        <a href="{% url 'dashboard:mg_customers:customer_detail' user.id %}" class="btn btn-sm btn-outline-primary">è©³ç´°</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" class="text-center p-4">
                        <p class="mb-0">å¯¾è±¡ã®é¡§å®¢ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
                        {% if query %}
                        <a href="{% url 'dashboard:mg_customers:customer_list' %}">æ¤œç´¢æ¡ä»¶ã‚’ã‚¯ãƒªã‚¢</a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
```

##### **ãƒ•ã‚¡ã‚¤ãƒ«:** `mg_customers/templates/mg_customers/customer_create.html` **(æ–°è¦ä½œæˆ)**

```html
{% extends "base_management.html" %}
{% block title %}æ–°è¦é¡§å®¢ã®è¿½åŠ {% endblock %}

{% block extra_css %}
<style>
    .password-wrapper { position: relative; }
    .password-wrapper input { padding-right: 40px !important; }
    .toggle-password { position: absolute; top: 50%; right: 10px; transform: translateY(-50%); cursor: pointer; user-select: none; color: #777; }
</style>
{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'dashboard:mg_customers:customer_list' %}">é¡§å®¢ç®¡ç†</a></li>
    <li class="breadcrumb-item active" aria-current="page">æ–°è¦è¿½åŠ </li>
  </ol>
</nav>

<h1 class="mb-3">æ–°è¦é¡§å®¢ã®è¿½åŠ </h1>

<div class="card">
    <div class="card-body">
        <form method="post">
            {% csrf_token %}
            <div class="mb-3">
                <label for="username" class="form-label">é¡§å®¢å (ãƒ­ã‚°ã‚¤ãƒ³ID) <span class="text-danger">*</span></label>
                <input type="text" class="form-control {% if errors.username %}is-invalid{% endif %}" id="username" name="username" value="{% if form_data.username %}{{ form_data.username }}{% endif %}" required>
                {% if errors.username %}<div class="invalid-feedback">{{ errors.username }}</div>{% endif %}
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                <input type="email" class="form-control" id="email" name="email" value="{% if form_data.email %}{{ form_data.email }}{% endif %}">
                <small class="form-text text-muted">ï¼ˆä»»æ„ï¼‰æ³¨æ–‡ç¢ºèªãƒ¡ãƒ¼ãƒ«ãªã©ã®é€šçŸ¥å…ˆã¨ã—ã¦åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚</small>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span class="text-danger">*</span></label>
                <div class="password-wrapper">
                    <input type="password" class="form-control {% if errors.password %}is-invalid{% endif %}" id="password" name="password" required>
                    <span class="toggle-password">ğŸ‘ï¸</span>
                </div>
                 {% if errors.password %}<div class="invalid-feedback">{{ errors.password }}</div>
                 {% else %}<small class="form-text text-muted">8æ–‡å­—ä»¥ä¸Šã§è¨­å®šã—ã¦ãã ã•ã„ã€‚</small>{% endif %}
            </div>
            <hr>
            <div class="d-flex justify-content-end">
                <a href="{% url 'dashboard:mg_customers:customer_list' %}" class="btn btn-secondary me-2">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</a>
                <button type="submit" class="btn btn-primary">ç™»éŒ²ã™ã‚‹</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function () {
    const togglePassword = document.querySelector('.toggle-password');
    const passwordInput = document.getElementById('password');
    if (togglePassword && passwordInput) {
        togglePassword.addEventListener('click', function () {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.textContent = type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ™ˆ';
        });
    }
});
</script>
{% endblock %}
```

##### **ãƒ•ã‚¡ã‚¤ãƒ«:** `mg_customers/templates/mg_customers/customer_detail.html` **(æ–°è¦ä½œæˆ)**

```html
{% extends "base_management.html" %}
{% load humanize %}
{% block title %}é¡§å®¢è©³ç´° - {{ customer.username }}{% endblock %}

{% block extra_css %}
<style>
    .password-wrapper { position: relative; }
    .password-wrapper input { padding-right: 40px !important; }
    .toggle-password { position: absolute; top: 50%; right: 10px; transform: translateY(-50%); cursor: pointer; user-select: none; color: #777; }
</style>
{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'dashboard:mg_customers:customer_list' %}">é¡§å®¢ç®¡ç†</a></li>
    <li class="breadcrumb-item active" aria-current="page">{{ customer.username }}</li>
  </ol>
</nav>
<h1 class="mb-3">é¡§å®¢è©³ç´°</h1>
<div class="row">
    <div class="col-md-4">
        <div class="card mb-3">
            <div class="card-header d-flex justify-content-between align-items-center">é¡§å®¢æƒ…å ±<div id="customer-info-actions"><button class="btn btn-sm btn-outline-secondary" id="edit-customer-btn"><i class="bi bi-pencil"></i> ç·¨é›†</button></div></div>
            <div class="card-body">
                <div id="customer-info-view"><dl class="row mb-0"><dt class="col-sm-5">ãƒ­ã‚°ã‚¤ãƒ³ID:</dt><dd class="col-sm-7" id="view-username">{{ customer.username }}</dd><dt class="col-sm-5">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</dt><dd class="col-sm-7" id="view-email">{{ customer.email|default:"æœªè¨­å®š" }}</dd><dt class="col-sm-5">ç™»éŒ²æ—¥:</dt><dd class="col-sm-7">{{ customer.date_joined|date:"Y/m/d" }}</dd></dl></div>
                <div id="customer-info-edit" class="d-none"><div class="mb-3"><label for="edit-username-input" class="form-label">é¡§å®¢å (ãƒ­ã‚°ã‚¤ãƒ³ID)</label><input type="text" id="edit-username-input" class="form-control form-control-sm" value="{{ customer.username }}"></div><div class="mb-3"><label for="edit-email-input" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label><input type="email" id="edit-email-input" class="form-control form-control-sm" value="{{ customer.email }}"></div><div class="d-flex justify-content-end"><button class="btn btn-sm btn-secondary me-2" id="cancel-edit-customer-btn">ä¸­æ­¢</button><button class="btn btn-sm btn-primary" id="save-customer-btn">ä¿å­˜</button></div></div>
            </div>
        </div>
        <div class="card"><div class="card-header">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</div><div class="card-body"><button class="btn btn-outline-danger" id="set-password-btn">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†è¨­å®šã™ã‚‹</button></div></div>
    </div>
    <div class="col-md-8">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">ãŠå±Šã‘å…ˆæƒ…å ±<button class="btn btn-sm btn-primary" id="add-destination-btn"><i class="bi bi-plus-circle"></i> æ–°è¦è¿½åŠ </button></div>
            <div class="card-body"><div id="destination-list" class="list-group"></div><div id="destination-list-empty" class="alert alert-secondary d-none">ãŠå±Šã‘å…ˆã¯ã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</div></div>
        </div>
    </div>
</div>
<div class="modal fade" id="destinationModal" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="destinationModalLabel">ãŠå±Šã‘å…ˆã®ç·¨é›†</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form id="destination-form"><input type="hidden" id="dest-id"><input type="hidden" id="dest-user-id" value="{{ customer.id }}"><div class="mb-3"><label for="dest-name" class="form-label">å®›å <span class="text-danger">*</span></label><input type="text" class="form-control" id="dest-name" required></div><div class="row mb-3"><div class="col-md-6"><label for="dest-postal-code" class="form-label">éƒµä¾¿ç•ªå· <span class="text-danger">*</span></label><input type="text" class="form-control" id="dest-postal-code" placeholder="ä¾‹: 123-4567" required></div><div class="col-md-6"><label for="dest-phone" class="form-label">é›»è©±ç•ªå· <span class="text-danger">*</span></label><input type="text" class="form-control" id="dest-phone" placeholder="ä¾‹: 090-1234-5678" required></div></div><div class="mb-3"><label for="dest-address" class="form-label">ä½æ‰€ <span class="text-danger">*</span></label><input type="text" class="form-control" id="dest-address" required></div><div class="row mb-3"><div class="col-md-6"><label for="dest-delivery-method" class="form-label">é…é€æ–¹æ³•</label><select id="dest-delivery-method" class="form-select"></select></div><div class="col-md-6"><label for="dest-shipping-zone" class="form-label">é€æ–™åŒºåˆ†</label><select id="dest-shipping-zone" class="form-select"></select></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button><button type="button" class="btn btn-primary" id="save-destination-btn">ä¿å­˜</button></div></div></div></div>
<div class="modal fade" id="passwordModal" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="passwordModalLabel">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å†è¨­å®š</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><p>æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’<strong>8æ–‡å­—ä»¥ä¸Š</strong>ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p><form id="password-form"><div class="mb-3"><label for="new-password" class="form-label">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label><div class="password-wrapper"><input type="password" class="form-control" id="new-password"><span class="toggle-password">ğŸ‘ï¸</span></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button><button type="button" class="btn btn-primary" id="save-password-btn">è¨­å®šã™ã‚‹</button></div></div></div></div>
<div class="toast-container position-fixed bottom-0 end-0 p-3"><div id="appToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true"><div class="toast-header"><strong id="appToastTitle" class="me-auto">é€šçŸ¥</strong><button type="button" class="btn-close" data-bs-dismiss="toast"></button></div><div id="appToastBody" class="toast-body"></div></div></div>
{% endblock %}
{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const USER_ID = {{ customer.id }};
    const deliveryMethodChoices = JSON.parse('{{ delivery_method_choices_json|escapejs }}');
    const shippingZoneChoices = JSON.parse('{{ shipping_zone_choices_json|escapejs }}');
    const destinationModal = new bootstrap.Modal(document.getElementById('destinationModal'));
    const passwordModal = new bootstrap.Modal(document.getElementById('passwordModal'));
    const appToast = new bootstrap.Toast(document.getElementById('appToast'), { delay: 4000 });
    let allDestinations = [];
    function getCookie(name) { const v = `; ${document.cookie}`; const p = v.split(`; ${name}=`); if (p.length === 2) return p.pop().split(';').shift(); }
    function showToast(message, type = 'success') { const t = appToast._element; t.querySelector('#appToastBody').textContent = message; const h = t.querySelector('.toast-header'); h.classList.remove('bg-success', 'bg-danger', 'text-white'); if (type === 'success') { t.querySelector('#appToastTitle').textContent = 'æˆåŠŸ'; h.classList.add('bg-success', 'text-white'); } else { t.querySelector('#appToastTitle').textContent = 'ã‚¨ãƒ©ãƒ¼'; h.classList.add('bg-danger', 'text-white'); } appToast.show(); }
    async function api(path, { method = 'GET', json, headers } = {}) { const hds = { 'X-CSRFToken': getCookie('csrftoken'), ...headers }; let body; if (json !== undefined) { hds['Content-Type'] = 'application/json'; body = JSON.stringify(json); } const res = await fetch(path, { method, headers: hds, body }); const data = await res.json().catch(() => null); return { ok: res.ok, status: res.status, data }; }
    const customerInfoView = document.getElementById('customer-info-view'); const customerInfoEdit = document.getElementById('customer-info-edit');
    function toggleCustomerInfoEdit(isEditMode) { customerInfoView.classList.toggle('d-none', isEditMode); customerInfoEdit.classList.toggle('d-none', !isEditMode); }
    document.getElementById('edit-customer-btn').addEventListener('click', () => { toggleCustomerInfoEdit(true); });
    document.getElementById('cancel-edit-customer-btn').addEventListener('click', () => { document.getElementById('edit-username-input').value = document.getElementById('view-username').textContent; document.getElementById('edit-email-input').value = document.getElementById('view-email').textContent; toggleCustomerInfoEdit(false); });
    document.getElementById('save-customer-btn').addEventListener('click', async () => { const newUsername = document.getElementById('edit-username-input').value; const newEmail = document.getElementById('edit-email-input').value; const res = await api(`/management/customers/api/${USER_ID}/update-info/`, { method: 'POST', json: { username: newUsername, email: newEmail } }); if (res.ok) { showToast(res.data.message); document.getElementById('view-username').textContent = newUsername; document.querySelector('.breadcrumb-item.active').textContent = newUsername; document.title = `é¡§å®¢è©³ç´° - ${newUsername}`; document.getElementById('view-email').textContent = newEmail || 'æœªè¨­å®š'; toggleCustomerInfoEdit(false); } else { showToast(res.data?.error?.message || 'æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'danger'); } });
    document.getElementById('set-password-btn').addEventListener('click', () => { document.getElementById('password-form').reset(); passwordModal.show(); });
    document.getElementById('save-password-btn').addEventListener('click', async () => { const password = document.getElementById('new-password').value; const res = await api(`/management/customers/api/${USER_ID}/set-password/`, { method: 'POST', json: { password: password } }); if (res.ok) { showToast(res.data.message); passwordModal.hide(); } else { showToast(res.data?.error?.message || 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®è¨­å®šã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'danger'); } });
    const togglePasswordModal = document.querySelector('#passwordModal .toggle-password'); const passwordInputModal = document.getElementById('new-password'); if (togglePasswordModal && passwordInputModal) { togglePasswordModal.addEventListener('click', function () { const type = passwordInputModal.getAttribute('type') === 'password' ? 'text' : 'password'; passwordInputModal.setAttribute('type', type); this.textContent = type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ™ˆ'; }); }
    function renderDestinations() { const c = document.getElementById('destination-list'); const e = document.getElementById('destination-list-empty'); c.innerHTML = ''; if (allDestinations.length === 0) { e.classList.remove('d-none'); return; } e.classList.add('d-none'); allDestinations.forEach(d => { const i = document.createElement('div'); i.className = 'list-group-item list-group-item-action'; i.innerHTML = `<div class="d-flex w-100 justify-content-between"><h6 class="mb-1">${d.name}</h6><div><button class="btn btn-sm btn-outline-secondary edit-btn" data-id="${d.id}"><i class="bi bi-pencil"></i> ç·¨é›†</button> <button class="btn btn-sm btn-outline-danger delete-btn" data-id="${d.id}"><i class="bi bi-trash"></i> å‰Šé™¤</button></div></div><p class="mb-1 small">ã€’${d.postal_code} ${d.address}</p><small class="text-muted">é›»è©±: ${d.phone} / é…é€: ${d.delivery_method_display}</small>`; c.appendChild(i); }); }
    async function fetchDestinations() { const res = await api(`/management/customers/api/${USER_ID}/destinations/`); if (res.ok) { allDestinations = res.data.destinations; renderDestinations(); } else { showToast('ãŠå±Šã‘å…ˆæƒ…å ±ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'danger'); } }
    function populateSelect(selectId, choices, selectedValue) { const s = document.getElementById(selectId); s.innerHTML = ''; choices.forEach(([v, t]) => { const o = new Option(t, v); if (v === selectedValue) o.selected = true; s.add(o); }); }
    function openModal(destination = null) { const f = document.getElementById('destination-form'); f.reset(); document.getElementById('destinationModalLabel').textContent = destination ? 'ãŠå±Šã‘å…ˆã®ç·¨é›†' : 'ãŠå±Šã‘å…ˆã®æ–°è¦è¿½åŠ '; document.getElementById('dest-id').value = destination?.id || ''; if (destination) { document.getElementById('dest-name').value = destination.name; document.getElementById('dest-postal-code').value = destination.postal_code; document.getElementById('dest-phone').value = destination.phone; document.getElementById('dest-address').value = destination.address; } populateSelect('dest-delivery-method', deliveryMethodChoices, destination?.delivery_method || 'YAMATO'); populateSelect('dest-shipping-zone', shippingZoneChoices, destination?.shipping_zone || 'NORMAL'); destinationModal.show(); }
    document.getElementById('add-destination-btn').addEventListener('click', () => openModal());
    document.getElementById('destination-list').addEventListener('click', (e) => { const eb = e.target.closest('.edit-btn'); if (eb) { const dId = parseInt(eb.dataset.id, 10); const d = allDestinations.find(d => d.id === dId); if (d) openModal(d); } const db = e.target.closest('.delete-btn'); if (db) { const dId = parseInt(db.dataset.id, 10); if (confirm('ã“ã®ãŠå±Šã‘å…ˆã‚’æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\nï¼ˆæ—¢å­˜ã®æ³¨æ–‡ã«ç´ä»˜ã„ã¦ã„ã‚‹å ´åˆã¯å‰Šé™¤ã§ãã¾ã›ã‚“ï¼‰')) { handleDelete(dId); } } });
    document.getElementById('save-destination-btn').addEventListener('click', async () => { const p = { id: document.getElementById('dest-id').value || null, user_id: USER_ID, name: document.getElementById('dest-name').value, postal_code: document.getElementById('dest-postal-code').value, phone: document.getElementById('dest-phone').value, address: document.getElementById('dest-address').value, delivery_method: document.getElementById('dest-delivery-method').value, shipping_zone: document.getElementById('dest-shipping-zone').value, }; if (p.id) p.id = parseInt(p.id, 10); const res = await api('/management/customers/api/destinations/upsert/', { method: 'POST', json: p }); if (res.ok) { showToast(res.data.message); destinationModal.hide(); fetchDestinations(); } else { showToast(res.data?.error?.message || 'ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'danger'); } });
    async function handleDelete(destinationId) { const res = await api(`/management/customers/api/destinations/${destinationId}/delete/`, { method: 'POST' }); if (res.ok) { showToast(res.data.message); fetchDestinations(); } else { showToast(res.data?.error?.message || 'å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'danger'); } }
    fetchDestinations();
});
</script>
{% endblock %}
```

#### 5. æ‰‹é †4ï¼šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®åæ˜ ã¨å‹•ä½œç¢ºèª

1. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ:**
    ã“ã®æ‰‹é †æ›¸ã§ã¯ãƒ¢ãƒ‡ãƒ«æ§‹é€ ã«å¤‰æ›´ãŒãªã„ãŸã‚ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã¯ä¸è¦ã§ã™ã€‚

2. **å‹•ä½œç¢ºèª:**
    * ç®¡ç†è€…ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã€Œé¡§å®¢ç®¡ç†ã€ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚
    * **é¡§å®¢ä¸€è¦§ç”»é¢:**
        * URLãŒ`/management/customers/`ã¨ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
        * å³ä¸Šã®ã€Œæ–°è¦é¡§å®¢ã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‹ã‚‰æ–°è¦é¡§å®¢è¿½åŠ ç”»é¢ã«é·ç§»ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
        * æ¤œç´¢ã‚„ã‚½ãƒ¼ãƒˆãŒæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
    * **é¡§å®¢æ–°è¦ä½œæˆç”»é¢:**
        * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›æ¬„ã®ã€Œç›®ç‰ã‚¢ã‚¤ã‚³ãƒ³ã€ãŒæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
        * ãƒ•ã‚©ãƒ¼ãƒ ã‚’æ­£ã—ãå…¥åŠ›ã—ã€ã€Œç™»éŒ²ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨é¡§å®¢ãŒä½œæˆã•ã‚Œã€ãã®é¡§å®¢ã®è©³ç´°ç”»é¢ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
    * **é¡§å®¢è©³ç´°ç”»é¢:**
        * URLãŒ`/management/customers/<user_id>/`ã¨ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
        * é¡§å®¢æƒ…å ±ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®šã€ãŠå±Šã‘å…ˆæƒ…å ±ã®éåŒæœŸCRUDãŒã™ã¹ã¦æ„å›³é€šã‚Šã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

---
---

ã”ç¢ºèªã„ãŸã ãã€å•é¡Œãªã„ã‚ˆã†ã§ã—ãŸã‚‰ã€æ¬¡ã«`30_å…±é€šåŸºç›¤è¨­å®š å®Ÿè£…æ‰‹é †æ›¸.md`ã®æ›´æ–°æ¡ˆã‚’æç¤ºã—ã¾ã™ã€‚